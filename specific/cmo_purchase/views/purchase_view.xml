<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
        <record id="purchase.menu_purchase_rfq" model="ir.ui.menu">
            <field name="groups_id" eval="[(6,0,[ref('purchase_invisible')])]"/>
        </record>
        <record id="purchase.purchase_form_action" model="ir.actions.act_window">
            <field name="domain"></field>
        </record>
        <record id="purchase_order_form" model="ir.ui.view">
            <field name="name">purchase.order.form</field>
            <field name="model">purchase.order</field>
            <field name="inherit_id" ref="purchase.purchase_order_form"/>
            <field name="arch" type="xml">
                <header position="attributes">
                    <attribute name="invisible">1</attribute>
                </header>
                <header position="after">
                    <header>
                        <button name="purchase_confirm" states="draft" string="Confirm Order" id="draft_confirm"/>
                        <button name="action_cancel" states="draft" string="Cancel" type="object"/>
                        <field name="state" widget="statusbar" statusbar_visible="draft, approved" readonly="1"/>
                    </header>
                </header>
                <h1 position="attributes">
                    <attribute name="invisible">1</attribute>
                </h1>
                <h1 position="after">
                    <h1>
                        <label string="Purchase Order"/>
                        <field name="name" class="oe_inline" readonly="1"/>
                    </h1>
                </h1>
                <field name="partner_ref" position="after">
                    <field name="project_id" attrs="{'invisible': ['|', ('po_type', '=', 'stationary'), ('po_type', '=', 'service')], 'required': [('po_type', 'in', ('po_project'))]}"/>
                    <field name="order_ref" domain="[('order_type', '=', 'quotation'), ('project_related_id', '!=', False), ('project_related_id', '=', project_id)]" attrs="{'invisible': ['|', ('po_type', '=', 'stationary'), ('po_type', '=', 'service')]}"/>
                    <field name="event_date_description" style="width:150%" attrs="{'invisible': ['|', ('po_type', '=', 'stationary'), ('po_type', '=', 'service')], 'required': [('order_ref', '!=', False)]}"/>
                    <field name="venue_description" style="width:150%" attrs="{'invisible': ['|', ('po_type', '=', 'stationary'), ('po_type', '=', 'service')], 'required': [('order_ref', '!=', False)]}"/>
                </field>
                <field name="picking_type_id" position="after">
                    <field name="po_type"/>
                </field>
                <field name="notes" position="before">
                    <group>
                        <group>
                            <field name="approve_ids"/>
                        </group>
                        <group></group>
                    </group>
                </field>
                <field name="date_planned" position="attributes">
                    <attribute name="invisible">1</attribute>
                    <attribute name="required">0</attribute>
                </field>
                <field name="account_analytic_id" position="attributes">
                    <attribute name="invisible">1</attribute>
                </field>
                <field name="order_line" position="attributes">
                    <attribute name="context">{'operating_unit_id': operating_unit_id, 'order_ref': order_ref, 'po_type': po_type}</attribute>
                </field>
                <field name="product_id" position="before">
                    <field name="product_ref" context="{'order_ref': order_ref}" options="{'no_open': True, 'no_create': True, 'no_create_edit': True}"/>
                </field>
                <field name="product_id" position="attributes">
                    <attribute name="context">{'po_type': po_type}</attribute>
                    <attribute name="options">{'no_open': True, 'no_create': True, 'no_create_edit': True}</attribute>
                </field>
            </field>
        </record>
        <record id="purchase_order_tree" model="ir.ui.view">
            <field name="name">purchase.order.tree</field>
            <field name="model">purchase.order</field>
            <field name="inherit_id" ref="purchase.purchase_order_tree"/>
            <field name="arch" type="xml">
                <field name="origin" position="attributes">
                    <attribute name="invisible">1</attribute>
                </field>
                <field name="origin" position="after">
                    <field name="project_id"/>
                </field>
            </field>
        </record>
        <record id="view_purchase_order_filter" model="ir.ui.view">
            <field name="name">purchase.order.list.select</field>
            <field name="model">purchase.order</field>
            <field name="inherit_id" ref="purchase.view_purchase_order_filter"/>
            <field name="arch" type="xml">
                <group position="inside">
                    <filter string="Project Name" domain="[]" context="{'group_by':'project_id'}"/>
                </group>
            </field>
        </record>
    </data>
</openerp>
